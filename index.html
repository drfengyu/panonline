<!DOCTYPE html>
<html>
<head>
	<title>GitHub文件上传和下载</title>
</head>
<body>
	<h1>GitHub文件上传和下载</h1>
	<form>
		<label for="file">选择文件：</label>
		<input type="file" id="file" name="file"><br><br>
		<button type="button" onclick="uploadFile()">上传文件</button>
	</form>
	<br>
	<h2>文件列表</h2>
	<ul id="fileList"></ul>
	<script>
		// GitHub仓库信息
		var username = "drfengyu";
		var repoName = "panonline";
		var apiUrl = "https://api.github.com/repos/" + username + "/" + repoName + "/contents/";

		// 获取文件列表
		fetch(apiUrl)
			.then(response => response.json())
			.then(data => {
				data.forEach(file => {
					if (file.type == "file") {
						var li = document.createElement("li");
						var a = document.createElement("a");
						a.href = file.download_url;
						a.innerText = file.name;
						li.appendChild(a);
						document.getElementById("fileList").appendChild(li);
					}
				});
			})
			.catch(error => console.error(error));

		// 上传文件
		function uploadFile() {
			var file = document.getElementById("file").files[0];
			var reader = new FileReader();
			reader.onload = function(event) {
				var content = event.target.result;
				var filename = file.name;
				var path = "path/to/" + filename;
				var message = "Upload " + filename;
				var url = "https://api.github.com/repos/" + username + "/" + repoName + "/contents/" + path;
				var data = {
					message: message,
					content: btoa(content)
				};
				fetch(url, {
					method: "PUT",
					headers: {
						"Authorization": "token your_access_token",
						"Content-Type": "application/json"
					},
					body: JSON.stringify(data)
				})
				.then(response => response.json())
				.then(data => console.log(data))
				.catch(error => console.error(error));
			};
			reader.readAsText(file);
		}
	</script>
</body>
</html>